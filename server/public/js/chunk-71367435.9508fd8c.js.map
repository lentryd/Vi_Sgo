{"version":3,"sources":["webpack:///./src/views/Login.vue?93c5","webpack:///src/views/Login.vue","webpack:///./src/views/Login.vue?5da6","webpack:///./src/views/Login.vue?7b2b","webpack:///./src/views/Login.vue?76f5"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","windowWidth","currentStep","on","$event","domain","fit","loading","_v","class","_s","disabledInput","model","value","callback","$$v","$set","trim","expression","checkHost","ttslogin","done","invalidTTSlogin","directives","name","rawName","selectors","_l","selector","index","hiddenSelector","key","id","showError","options","length","checkSelector","labels","loadItems","option","labelsInfo","_e","checkTTS","auth","added","login","_login","password","_password","checkAuth","staticRenderFns","data","computed","methods","onResize","window","innerWidth","host","replace","$store","loadForm","s","find","i","arr","created","addEventListener","destroyed","removeEventListener","component"],"mappings":"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","file":"js/chunk-71367435.9508fd8c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login\"},[_c('md-steppers',{attrs:{\"md-linear\":\"\",\"md-vertical\":_vm.windowWidth < 800,\"md-active-step\":_vm.currentStep},on:{\"update:mdActiveStep\":function($event){_vm.currentStep=$event},\"update:md-active-step\":function($event){_vm.currentStep=$event}}},[_c('md-step',{attrs:{\"id\":\"domain\",\"md-label\":\"Домен\",\"md-done\":_vm.domain.fit,\"md-error\":_vm.domain.fit === false ? 'Не подходит' : null,\"md-editable\":false,\"md-description\":_vm.domain.loading ? 'Проверка...' : null}},[_c('p',[_vm._v(\"Ниже нужно указать ссылку на ваш сетевой город.\")]),_c('i',[_vm._v(\"Например: \"),_c('a',{attrs:{\"href\":\"//sgo.rso23.ru\"}},[_vm._v(\"https://sgo.rso23.ru\")]),_vm._v(\" или \"),_c('a',{attrs:{\"href\":\"//212.220.99.65\"}},[_vm._v(\"http://212.220.99.65\")])]),_c('md-field',{class:{ 'md-invalid': _vm.domain.fit === false }},[_c('label',[_vm._v(\"Ссылка\")]),_c('span',{staticClass:\"md-error\"},[_vm._v(\"Этот сайт не подходит\")]),_c('span',{staticClass:\"md-helper-text\"},[_vm._v(_vm._s(_vm.domain.loading ? \"Проверка сайта...\" : \"Введите ссылку на сайт\"))]),_c('md-input',{attrs:{\"disabled\":_vm.disabledInput},model:{value:(_vm.domain.host),callback:function ($$v) {_vm.$set(_vm.domain, \"host\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"domain.host\"}})],1),_c('md-button',{staticClass:\"md-dense md-raised md-primary\",attrs:{\"disabled\":_vm.disabledInput},on:{\"click\":_vm.checkHost}},[_vm._v(_vm._s(_vm.domain.loading ? \"Проверка...\" : \"Продолжить\"))])],1),_c('md-step',{attrs:{\"id\":\"ttslogin\",\"md-label\":\"Образовательная организация\",\"md-done\":_vm.ttslogin.done,\"md-error\":_vm.invalidTTSlogin ? 'Не все выбрано' : null,\"md-editable\":true,\"md-description\":_vm.ttslogin.loading ? 'Загрузка формы...' : null}},[_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.ttslogin.selectors.length),expression:\"ttslogin.selectors.length\"}]},[_vm._v(\" Ниже вам нужно выбрать ваше учебное заведение. \")]),_vm._l((_vm.ttslogin.selectors),function(selector,index){return _c('md-field',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.hiddenSelector(index)),expression:\"!hiddenSelector(index)\"}],key:selector.id,class:{\n          'md-invalid':\n            _vm.ttslogin.showError &&\n            selector.options.length &&\n            !_vm.checkSelector(selector)\n        }},[_c('label',{attrs:{\"for\":selector.id}},[_vm._v(_vm._s(_vm.ttslogin.labels[selector.id]))]),_c('md-select',{attrs:{\"disabled\":_vm.disabledInput},on:{\"md-selected\":function($event){return _vm.loadItems(index)}},model:{value:(selector.value),callback:function ($$v) {_vm.$set(selector, \"value\", $$v)},expression:\"selector.value\"}},_vm._l((selector.options),function(option){return _c('md-option',{key:option.id,attrs:{\"value\":option.id}},[_vm._v(_vm._s(option.name))])}),1),_c('span',{staticClass:\"md-error\"},[_vm._v(\"Выберите \"+_vm._s(_vm.ttslogin.labelsInfo[selector.id]))]),(selector.options.length && !_vm.checkSelector(selector))?_c('span',{staticClass:\"md-helper-text\"},[_vm._v(\"Выберите \"+_vm._s(_vm.ttslogin.labelsInfo[selector.id]))]):_vm._e()],1)}),_c('md-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.ttslogin.selectors.length),expression:\"ttslogin.selectors.length\"}],staticClass:\"md-dense md-raised md-primary\",attrs:{\"disabled\":_vm.disabledInput},on:{\"click\":_vm.checkTTS}},[_vm._v(_vm._s(_vm.ttslogin.loading ? \"Загрузка...\" : \"Продолжить\"))])],2),_c('md-step',{attrs:{\"id\":\"auth\",\"md-label\":\"Авторизация\",\"md-error\":_vm.auth.showError && _vm.auth.added === false ? 'Где-то ошибка' : null,\"md-description\":_vm.auth.loading ? 'Проверка данных...' : null}},[_c('p',[_vm._v(\" Ниже нужно ввести логин и пароль для входа в сетевой город. \")]),_c('md-field',{class:{\n          'md-invalid':\n            _vm.auth.showError &&\n            _vm.auth.added === false &&\n            _vm.auth.login == _vm.auth._login\n        }},[_c('label',[_vm._v(\"Логин\")]),_c('md-input',{attrs:{\"type\":\"text\",\"autocomplete\":\"login\",\"disabled\":_vm.disabledInput},model:{value:(_vm.auth.login),callback:function ($$v) {_vm.$set(_vm.auth, \"login\", $$v)},expression:\"auth.login\"}}),(!_vm.auth.login)?_c('span',{staticClass:\"md-error\"},[_vm._v(\"Вы забыли ввести логин\")]):_c('span',{staticClass:\"md-error\"},[_vm._v(\"Логин введен неверно\")]),_c('span',{staticClass:\"md-helper-text\"},[_vm._v(\"Введите логин\")])],1),_c('md-field',{class:{\n          'md-invalid':\n            _vm.auth.showError &&\n            _vm.auth.added === false &&\n            _vm.auth.password == _vm.auth._password\n        }},[_c('label',[_vm._v(\"Пароль\")]),_c('md-input',{attrs:{\"type\":\"password\",\"autocomplete\":\"password\",\"disabled\":_vm.disabledInput},model:{value:(_vm.auth.password),callback:function ($$v) {_vm.$set(_vm.auth, \"password\", $$v)},expression:\"auth.password\"}}),(!_vm.auth.password)?_c('span',{staticClass:\"md-error\"},[_vm._v(\"Вы забыли ввести пароль\")]):_c('span',{staticClass:\"md-error\"},[_vm._v(\"Пароль введен неверно\")]),_c('span',{staticClass:\"md-helper-text\"},[_vm._v(\"Введите пароль\")])],1),_c('md-button',{staticClass:\"md-dense md-raised md-primary\",attrs:{\"disabled\":_vm.disabledInput},on:{\"click\":_vm.checkAuth}},[_vm._v(_vm._s(0 ? \"Проверка...\" : \"Войти\"))])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"login\">\n    <md-steppers\n      md-linear\n      :md-vertical=\"windowWidth < 800\"\n      :md-active-step.sync=\"currentStep\"\n    >\n      <md-step\n        id=\"domain\"\n        md-label=\"Домен\"\n        :md-done=\"domain.fit\"\n        :md-error=\"domain.fit === false ? 'Не подходит' : null\"\n        :md-editable=\"false\"\n        :md-description=\"domain.loading ? 'Проверка...' : null\"\n      >\n        <p>Ниже нужно указать ссылку на ваш сетевой город.</p>\n        <i\n          >Например:\n          <a href=\"//sgo.rso23.ru\">https://sgo.rso23.ru</a>\n          или\n          <a href=\"//212.220.99.65\">http://212.220.99.65</a></i\n        >\n        <md-field :class=\"{ 'md-invalid': domain.fit === false }\">\n          <label>Ссылка</label>\n          <span class=\"md-error\">Этот сайт не подходит</span>\n          <span class=\"md-helper-text\">{{\n            domain.loading ? \"Проверка сайта...\" : \"Введите ссылку на сайт\"\n          }}</span>\n          <md-input\n            v-model.trim=\"domain.host\"\n            :disabled=\"disabledInput\"\n          ></md-input>\n        </md-field>\n        <md-button\n          @click=\"checkHost\"\n          :disabled=\"disabledInput\"\n          class=\"md-dense md-raised md-primary\"\n          >{{ domain.loading ? \"Проверка...\" : \"Продолжить\" }}</md-button\n        >\n      </md-step>\n\n      <md-step\n        id=\"ttslogin\"\n        md-label=\"Образовательная организация\"\n        :md-done=\"ttslogin.done\"\n        :md-error=\"invalidTTSlogin ? 'Не все выбрано' : null\"\n        :md-editable=\"true\"\n        :md-description=\"ttslogin.loading ? 'Загрузка формы...' : null\"\n      >\n        <p v-show=\"ttslogin.selectors.length\">\n          Ниже вам нужно выбрать ваше учебное заведение.\n        </p>\n        <md-field\n          :key=\"selector.id\"\n          :class=\"{\n            'md-invalid':\n              ttslogin.showError &&\n              selector.options.length &&\n              !checkSelector(selector)\n          }\"\n          v-show=\"!hiddenSelector(index)\"\n          v-for=\"(selector, index) in ttslogin.selectors\"\n        >\n          <label :for=\"selector.id\">{{ ttslogin.labels[selector.id] }}</label>\n          <md-select\n            v-model=\"selector.value\"\n            :disabled=\"disabledInput\"\n            @md-selected=\"loadItems(index)\"\n          >\n            <md-option\n              :key=\"option.id\"\n              :value=\"option.id\"\n              v-for=\"option in selector.options\"\n              >{{ option.name }}</md-option\n            >\n          </md-select>\n          <span class=\"md-error\"\n            >Выберите {{ ttslogin.labelsInfo[selector.id] }}</span\n          >\n          <span\n            class=\"md-helper-text\"\n            v-if=\"selector.options.length && !checkSelector(selector)\"\n            >Выберите {{ ttslogin.labelsInfo[selector.id] }}</span\n          >\n        </md-field>\n        <md-button\n          @click=\"checkTTS\"\n          :disabled=\"disabledInput\"\n          v-show=\"ttslogin.selectors.length\"\n          class=\"md-dense md-raised md-primary\"\n          >{{ ttslogin.loading ? \"Загрузка...\" : \"Продолжить\" }}</md-button\n        >\n      </md-step>\n\n      <md-step\n        id=\"auth\"\n        md-label=\"Авторизация\"\n        :md-error=\"\n          auth.showError && auth.added === false ? 'Где-то ошибка' : null\n        \"\n        :md-description=\"auth.loading ? 'Проверка данных...' : null\"\n      >\n        <p>\n          Ниже нужно ввести логин и пароль для входа в сетевой город.\n        </p>\n        <md-field\n          :class=\"{\n            'md-invalid':\n              auth.showError &&\n              auth.added === false &&\n              auth.login == auth._login\n          }\"\n        >\n          <label>Логин</label>\n          <md-input\n            type=\"text\"\n            v-model=\"auth.login\"\n            autocomplete=\"login\"\n            :disabled=\"disabledInput\"\n          ></md-input>\n          <span v-if=\"!auth.login\" class=\"md-error\"\n            >Вы забыли ввести логин</span\n          >\n          <span v-else class=\"md-error\">Логин введен неверно</span>\n          <span class=\"md-helper-text\">Введите логин</span>\n        </md-field>\n        <md-field\n          :class=\"{\n            'md-invalid':\n              auth.showError &&\n              auth.added === false &&\n              auth.password == auth._password\n          }\"\n        >\n          <label>Пароль</label>\n          <md-input\n            type=\"password\"\n            v-model=\"auth.password\"\n            autocomplete=\"password\"\n            :disabled=\"disabledInput\"\n          ></md-input>\n          <span v-if=\"!auth.password\" class=\"md-error\"\n            >Вы забыли ввести пароль</span\n          >\n          <span v-else class=\"md-error\">Пароль введен неверно</span>\n          <span class=\"md-helper-text\">Введите пароль</span>\n        </md-field>\n        <md-button\n          @click=\"checkAuth\"\n          :disabled=\"disabledInput\"\n          class=\"md-dense md-raised md-primary\"\n          >{{ 0 ? \"Проверка...\" : \"Войти\" }}</md-button\n        >\n      </md-step>\n    </md-steppers>\n  </div>\n</template>\n\n<script>\nexport default {\n  data: () => ({\n    windowWidth: window.innerWidth,\n    currentStep: \"domain\",\n    domain: {\n      host: \"\",\n      fit: null,\n      loading: false\n    },\n    ttslogin: {\n      done: false,\n      get tts() {\n        let str = \"\";\n        this.selectors.forEach(s => {\n          if (!s.options.find(o => o.id == s.value)) return;\n          if (str) str += \"&\";\n          str += `${s.name}=${s.value}`;\n        });\n        return str;\n      },\n      labels: {\n        countries: \"Страна\",\n        states: \"Регион\",\n        provinces: \"Округ/Район\",\n        cities: \"Населённый пункт\",\n        funcs: \"Тип ОО\",\n        schools: \"Образовательная организация\"\n      },\n      labelsInfo: {\n        countries: \"cтрану\",\n        states: \"регион\",\n        provinces: \"округ/район\",\n        cities: \"населённый пункт\",\n        funcs: \"тип ОО\",\n        schools: \"образовательную организацию\"\n      },\n      loading: false,\n      showError: false,\n      selectors: []\n    },\n    auth: {\n      loading: false,\n      login: \"\",\n      _login: \"\",\n      password: \"\",\n      _password: \"\",\n      added: null,\n      showError: false\n    }\n  }),\n  computed: {\n    disabledInput() {\n      return this.domain.loading || this.ttslogin.loading || this.auth.loading;\n    },\n    invalidTTSlogin() {\n      return !!(\n        this.ttslogin.showError &&\n        this.ttslogin.selectors.find(s => !s.options.find(o => o.id == s.value))\n      );\n    }\n  },\n  methods: {\n    onResize() {\n      this.windowWidth = window.innerWidth;\n    },\n    checkHost() {\n      if (!this.domain.host) return;\n      this.domain.fit = null;\n      this.domain.loading = true;\n      this.domain.host = this.domain.host.replace(/https*:\\/\\/|\\/.*/g, \"\");\n\n      this.$store\n        .dispatch(\"CheckHost\", this.domain.host)\n        .then(fit => {\n          this.domain.fit = fit;\n          if (fit) {\n            this.loadForm();\n            this.currentStep = \"ttslogin\";\n          }\n        })\n        .catch(err => this.$root.$emit(\"catch-error\", err))\n        .finally(() => (this.domain.loading = false));\n    },\n    loadForm() {\n      this.ttslogin.loading = true;\n\n      this.$store\n        .dispatch(\"GetAuthForm\", this.domain.host)\n        .then(selectors => (this.ttslogin.selectors = selectors))\n        .catch(err => this.$root.$emit(\"catch-error\", err))\n        .finally(() => (this.ttslogin.loading = false));\n    },\n    checkSelector(s) {\n      return !!s.options.find(o => o.id == s.value);\n    },\n    loadItems(i) {\n      const arr = this.ttslogin.selectors;\n      if (i + 1 >= arr.length || !arr[i].value) return;\n      for (let index = i + 1; index < arr.length; index++) {\n        arr[index].value = null;\n        arr[index].options = [];\n      }\n      this.ttslogin.loading = true;\n\n      this.$store\n        .dispatch(\"UploadAuthForm\", {\n          host: this.domain.host,\n          allSelected: this.ttslogin.tts,\n          lastSelected: arr[i].name\n        })\n        .then(items => {\n          arr[i + 1].options = items;\n          setTimeout(() => {\n            if (items.length == 1) arr[i + 1].value = items[0].id;\n          }, 0);\n        })\n        .catch(err => this.$root.$emit(\"catch-error\", err))\n        .finally(() => (this.ttslogin.loading = false));\n    },\n    checkTTS() {\n      this.ttslogin.showError = true;\n      if (!this.invalidTTSlogin) {\n        this.currentStep = \"auth\";\n        this.ttslogin.done = true;\n        this.ttslogin.showError = false;\n      }\n    },\n    checkAuth() {\n      this.auth.added = null;\n      this.auth.showError = true;\n      this.auth._login = this.auth.login;\n      this.auth._password = this.auth.password;\n      if (!this.auth.login || !this.auth.password) {\n        return (this.auth.added = false);\n      }\n      this.auth.loading = true;\n\n      this.$store\n        .dispatch(\"AddNewUser\", {\n          host: this.domain.host,\n          login: this.auth.login,\n          password: this.auth.password,\n          ttsLogin: this.ttslogin.tts\n        })\n        .then(id => {\n          this.auth.added = true;\n          this.$root.$emit(\"change-user\", id);\n          this.$store.state.settings.storage.connectedUsers.push(id);\n          setTimeout(() => this.$router.replace(\"/diary\"), 0);\n        })\n        .catch(err => {\n          if (err.code == 4007) return (this.auth.added = false);\n          this.$root.$emit(\"catch-error\", err);\n        })\n        .finally(() => (this.auth.loading = false));\n    },\n    hiddenSelector(i) {\n      const arr = this.ttslogin.selectors;\n      if (i < 0 || i >= arr.length) return true;\n      return (\n        this.hiddenSelector(i - 1) == true &&\n        (arr[i]?.options?.length ?? 0) == 1 &&\n        (arr[i + 1]?.options?.length ?? 0) == 1\n      );\n    }\n  },\n  created() {\n    window.addEventListener(\"resize\", this.onResize);\n  },\n  destroyed() {\n    window.removeEventListener(\"resize\", this.onResize);\n  }\n};\n</script>\n\n<style>\n.login .md-steppers-wrapper {\n  height: fit-content !important;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=21793519&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}