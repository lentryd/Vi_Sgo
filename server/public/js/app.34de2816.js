(function(e){function t(t){for(var a,r,u=t[0],i=t[1],s=t[2],l=0,d=[];l<u.length;l++)r=u[l],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&d.push(o[r][0]),o[r]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);h&&h(t);while(d.length)d.shift()();return c.push.apply(c,s||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],a=!0,r=1;r<n.length;r++){var u=n[r];0!==o[u]&&(a=!1)}a&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={app:0},o={app:0},c=[];function u(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-145edab0":"0a2b21ce","chunk-21d6963c":"719fd7bd","chunk-27728818":"7c5f91af","chunk-27de712c":"0bdbd303","chunk-2d0b3289":"7ab1428c","chunk-2d22d746":"de55f9cf","chunk-73ce999a":"0df4f33a","chunk-ad7e02c2":"a3269f18"}[e]+".js"}function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-145edab0":1,"chunk-21d6963c":1,"chunk-27de712c":1,"chunk-73ce999a":1,"chunk-ad7e02c2":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-145edab0":"69af7606","chunk-21d6963c":"3a4b87cb","chunk-27728818":"31d6cfe0","chunk-27de712c":"f2c8e63b","chunk-2d0b3289":"31d6cfe0","chunk-2d22d746":"31d6cfe0","chunk-73ce999a":"21866a89","chunk-ad7e02c2":"e5b3f375"}[e]+".css",o=i.p+a,c=document.getElementsByTagName("link"),u=0;u<c.length;u++){var s=c[u],l=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(l===a||l===o))return t()}var d=document.getElementsByTagName("style");for(u=0;u<d.length;u++){s=d[u],l=s.getAttribute("data-href");if(l===a||l===o)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var a=t&&t.target&&t.target.src||o,c=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=a,delete r[e],h.parentNode.removeChild(h),n(c)},h.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(h)})).then((function(){r[e]=0})));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var c=new Promise((function(t,n){a=o[e]=[t,n]}));t.push(a[2]=c);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=u(e);var d=new Error;s=function(t){l.onerror=l.onload=null,clearTimeout(h);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",d.name="ChunkLoadError",d.type=a,d.request=r,n[1](d)}o[e]=void 0}};var h=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var h=l;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"14ee":function(e,t,n){},"27ac":function(e,t,n){},"2dae":function(e,t,n){"use strict";var a=n("14ee"),r=n.n(a);r.a},"56d7":function(e,t,n){"use strict";n.r(t);n("99af"),n("4de4"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.layout,{tag:"component"},[n("router-view")],1)},o=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[n("span",{staticClass:"md-headline"},[e._v(e._s(e.name))]),n("router-view"),n("Sidebar"),n("md-snackbar",{attrs:{"md-active":!!e.alert,"md-closed":function(){return e.alert=!1}}},[n("span",[e._v(e._s(e.alert))])])],1)},u=[],i=(n("b0c0"),n("d3b7"),n("ac1f"),n("5319"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("md-bottom-bar",{attrs:{"md-sync-route":"","md-type":"shift"}},[n("md-bottom-bar-item",{attrs:{to:"/diary","md-icon":"assignment","md-label":"Дневник"}}),n("md-bottom-bar-item",{attrs:{to:"/subject","md-icon":"subject","md-label":"Предмет"}}),n("md-bottom-bar-item",{attrs:{to:"/journal","md-icon":"leaderboard","md-label":"Журнал"}}),n("md-bottom-bar-item",{attrs:{to:"/grade","md-icon":"school","md-label":"Итоги"}}),n("md-bottom-bar-item",{attrs:{to:"/settings","md-icon":"settings","md-label":"Настройки"}})],1)}),s=[],l=(n("2dae"),n("2877")),d={},h=Object(l["a"])(d,i,s,!1,null,null,null),f=h.exports,m={data:function(){return{alert:!1}},methods:{catchError:function(e){switch(e.code){case 4001:this.alert="Не удалось понять запрос";break;case 4002:this.alert="Запрос построен неверно";break;case 4004:this.alert="Неизвестный метод";break;case 4003:case 4005:this.alert=e.msg;break;case 4006:this.alert="Ошибка парсера, попробуйте еще раз";break;case 4007:this.alert="Для этого метода нужна авторизация в сетевом";break;case 4008:this.alert="Сетевой город не отвечает";break;case 4009:this.$router.replace("login"),this.alert="Для начала нужно войти в систему";break;default:this.alert="Неизвестная ошибка, попробуйте ещё раз"}console.error(e)}},computed:{name:function(){return this.$route.name}},beforeCreate:function(){var e=this;fetch("//".concat(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_host||location.host,"/exist/").concat(localStorage.uid)).then((function(e){return e.json()})).then((function(t){t||e.$router.replace("login")})).catch((function(){return e.$router.replace("login")}))},mounted:function(){this.$root.$on("catch-error",this.catchError)},components:{Sidebar:f}},g=m,v=(n("f995"),Object(l["a"])(g,c,u,!1,null,"1c146c7c",null)),p=v.exports,b={computed:{layout:function(){var e,t;return(null===(e=this.$route.meta)||void 0===e?void 0:e.layout)?(null===(t=this.$route.meta)||void 0===t?void 0:t.layout)+"-layout":"div"}},components:{MainLayout:p}},y=b,k=Object(l["a"])(y,r,o,!1,null,null,null),S=k.exports,_=n("2f62"),O={state:{storage:JSON.parse(localStorage["vi-sgo-cache"]||"{}")},actions:{getCache:function(e,t){var n,a=e.state;return"name"in t&&"next"in t&&(Date.now()-(null===(n=a.storage[t.name])||void 0===n?void 0:n.timestamp)<(t.time||6e4)?a.storage[t.name].data:t.next())},saveCache:function(e,t){var n=e.commit;return"name"in t&&"value"in t&&(n("changeCacheStorage",{name:t.name,value:t.value}),t.value)}},mutations:{changeCacheStorage:function(e,t){e.storage[t.name]={data:t.value,timestamp:Date.now()},localStorage["vi-sgo-cache"]=JSON.stringify(e.storage)}}},x=(n("7db0"),n("caad"),n("25f0"),n("2532"),n("bf19"),n("b85c")),C=n("d4ec"),E=n("bee2"),j=function(){function e(){Object(C["a"])(this,e),this._genHistory=[]}return Object(E["a"])(e,[{key:"genID",value:function(){var e;do{e="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)}))}while(this._genHistory.includes(e));return this._genHistory.push(e),e}},{key:"checkID",value:function(e){return this._genHistory.includes(e)}}]),e}(),w=function(){function e(t){var n,a;Object(C["a"])(this,e),this._id=A.genID(),this._send=!1,this._message=t,this._timestamp=(new Date).toJSON(),this._callbackDone=null===t||void 0===t||null===(n=t.callback)||void 0===n?void 0:n.done,this._callbackError=null===t||void 0===t||null===(a=t.callback)||void 0===a?void 0:a.error}return Object(E["a"])(e,[{key:"callback",value:function(e){var t,n="error"in e;null===(t=this[n?"_callbackError":"_callbackDone"])||void 0===t||t.call(this,e[n?"error":"data"])}},{key:"id",get:function(){return this._id}},{key:"send",get:function(){return this._send},set:function(e){return this._send=e}},{key:"message",get:function(){return JSON.stringify({mid:this._id,method:this._message.method,data:this._message.data,timestamp:this._timestamp})}},{key:"rawMessage",get:function(){return{mid:this._id,method:this._message.method,data:this._message.data,timestamp:this._timestamp}}},{key:"time",get:function(){return new Date(this._timestamp)}}]),e}(),A=new j,M={state:{isConnected:!1,messages:[],listeners:[]},actions:{CheckHost:function(e,t){var n=e.dispatch;return n("SendMessage",{method:"CheckHost",data:{host:t}}).then((function(e){var t=e.canWork;return t}))},AuthForm:function(e,t){var n=e.dispatch;return n("SendMessage",{method:"AuthForm",data:{host:t}}).then((function(e){var t=e.selectors;return t}))},SelectItems:function(e,t){var n=e.dispatch;return n("SendMessage",{method:"SelectedData",data:t}).then((function(e){var t=e.items;return t}))},AddUser:function(e,t){var n=e.dispatch;return n("SendMessage",{method:"AddUser",data:t}).then((function(e){var t=e.id;return t}))},LogIn:function(e){var t=e.dispatch;return t("SendMessage",{method:"LogIn"}).then((function(e){var t=e.auth;return t}))},LogOut:function(e){var t=e.dispatch;return t("SendMessage",{method:"LogOut"}).then((function(e){var t=e.auth;return t}))},CheckAuth:function(e){var t=e.dispatch;return t("SendMessage",{method:"CheckAuth"}).then((function(e){var t=e.need;return t}))},TimeOutAuth:function(e){var t=e.dispatch;return t("SendMessage",{method:"TimeOutAuth"}).then((function(e){var t=e.time;return t}))},GetTypes:function(e){var t=e.dispatch;return t("getCache",{time:864e5,name:"Types",next:function(){return t("AuthBefore",{method:"GetTypes"}).then((function(e){return t("saveCache",{name:"Types",value:e})}))}}).then((function(e){var t=e.types;return t}))},GetRange:function(e){var t=e.dispatch;return t("getCache",{time:864e5,name:"Range",next:function(){return t("AuthBefore",{method:"GetRange"}).then((function(e){return t("saveCache",{name:"Range",value:e})}))}}).then((function(e){var t=e.range;return t}))},GetSubjectsID:function(e){var t=e.dispatch;return t("getCache",{time:864e5,name:"Subjects",next:function(){return t("AuthBefore",{method:"GetSubjectsID"}).then((function(e){return t("saveCache",{name:"Subjects",value:e})}))}}).then((function(e){var t=e.subjects;return t}))},GetDiary:function(e,t){var n=e.dispatch,a="Diary"+(+t.start+ +t.end);return n("getCache",{name:a,time:12e4,next:function(){return n("AuthBefore",{method:"GetDiary",data:t}).then((function(e){return n("saveCache",{name:a,value:e})}))}})},GetMark:function(e,t){var n=e.dispatch,a="Mark"+t.id;return n("getCache",{name:a,time:864e5,next:function(){return n("AuthBefore",{method:"GetMark",data:t}).then((function(e){return n("saveCache",{name:a,value:e})}))}}).then((function(e){var t=e.mark;return t}))},GetSubject:function(e,t){var n=e.dispatch,a="Subject"+t.id+(+t.start+ +t.end);return n("getCache",{name:a,time:12e4,next:function(){return n("AuthBefore",{method:"GetSubject",data:t}).then((function(e){return n("saveCache",{name:a,value:e})}))}}).then((function(e){var t=e.subject;return t}))},GetJournal:function(e,t){var n=e.dispatch,a="Journal"+(+t.start+ +t.end);return n("getCache",{name:a,time:12e4,next:function(){return n("AuthBefore",{method:"GetJournal",data:t}).then((function(e){return n("saveCache",{name:a,value:e})}))}})},GetTotalMarks:function(e){var t=e.dispatch;return t("TimeOutAuth").then((function(e){return e?void 0:t("LogIn")})).then((function(){return t("SendMessage",{method:"GetTotalMarks"})}))},AuthBefore:function(e,t){var n=e.dispatch;return n("TimeOutAuth").then((function(e){return e?void 0:n("LogIn")})).then((function(){return n("SendMessage",t)}))},SendMessage:function(e,t){var n=e.state,r=e.commit;return new Promise((function(e,o){t.callback={done:e,error:o};var c=new w(t);c.send=n.isConnected,n.isConnected&&a["default"].prototype.$socket.send(c.message),r("addMessage",c)}))}},mutations:{addMessage:function(e,t){e.messages.push(t)},SOCKET_ONOPEN:function(e){e.isConnected=!0;var t,n=Object(x["a"])(e.messages);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!r.send){if(!e.isConnected)return;r.send=!0,a["default"].prototype.$socket.send(r.message)}}}catch(o){n.e(o)}finally{n.f()}},SOCKET_ONCLOSE:function(e){e.isConnected=!1},SOCKET_ONERROR:function(e,t){console.group("SOCKET_ONERROR"),console.info("State: ",e),console.error("Event: ",t),console.groupEnd()},SOCKET_ONMESSAGE:function(e,t){try{t=JSON.parse(t.data)}catch(c){return console.error("The message couldn't be processed.",c),!1}if(t.mid){var n=e.messages.find((function(e){return t.mid===e.id}));n.callback(t)}var a,r=Object(x["a"])(e.listeners);try{for(r.s();!(a=r.n()).done;){var o=a.value;if(o.work&&o.method===t.method)try{o.callback(t)}catch(c){console.error("An error occurred when calling the callback function.",c)}}}catch(u){r.e(u)}finally{r.f()}},SOCKET_RECONNECT:function(e,t){console.group("SOCKET_RECONNECT"),console.info("Count: ",t),console.info("State: ",e),console.groupEnd(),t>10&&location.reload()}}},T={state:{storage:JSON.parse(localStorage["vi-sgo-settings"]||"{}")},actions:{saveSettings:function(e,t){var n=e.commit;return"name"in t&&"value"in t&&(n("changeSettingsStorage",{name:t.name,value:t.value}),!0)}},mutations:{changeSettingsStorage:function(e,t){e.storage[t.name]=t.value,localStorage["vi-sgo-settings"]=JSON.stringify(e.storage)}}};a["default"].use(_["a"]);var N=new _["a"].Store({modules:{cache:O,socket:M,settings:T}}),D=n("8c4f");a["default"].use(D["a"]);var G=new D["a"]({mode:"history",routes:[{path:"/",name:"Home",meta:{layout:"info"},component:function(){return n.e("chunk-27728818").then(n.bind(null,"bb51"))}},{path:"/about",name:"About",meta:{layout:"info"},component:function(){return n.e("chunk-2d22d746").then(n.bind(null,"f820"))}},{path:"/login",name:"Авторизация",component:function(){return n.e("chunk-73ce999a").then(n.bind(null,"a55b"))}},{path:"/diary",name:"Дневник",meta:{layout:"main"},component:function(){return n.e("chunk-27de712c").then(n.bind(null,"5fa4"))}},{path:"/subject",name:"Предмет",meta:{layout:"main"},component:function(){return n.e("chunk-145edab0").then(n.bind(null,"ac7a"))}},{path:"/journal",name:"Журнал",meta:{layout:"main"},component:function(){return n.e("chunk-ad7e02c2").then(n.bind(null,"762c"))}},{path:"/grade",name:"Итоги",meta:{layout:"main"},component:function(){return n.e("chunk-21d6963c").then(n.bind(null,"3af7"))}},{path:"/settings",name:"Настройки",meta:{layout:"main"},component:function(){return n.e("chunk-2d0b3289").then(n.bind(null,"26d3"))}}]}),P=n("1dce"),L=n.n(P),R=n("43f9"),$=n.n(R),B=n("b408"),J=n.n(B);n("e094"),n("51de");a["default"].use(L.a),a["default"].use($.a),a["default"].use(J.a,"wss://".concat(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_host||location.host,"/?uid=").concat(localStorage.uid),{store:N,reconnection:!0}),a["default"].filter("date",(function(e){if(!e)return"";function t(e){return e<10&&(e="0"+e),e}return"string"==typeof e&&(e=new Date(e)),"".concat(t(e.getDate()),".").concat(t(e.getMonth()+1),".").concat(t(e.getFullYear()))})),a["default"].material.locale.dateFormat="dd.MM.yyyy",a["default"].material.locale.months=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],a["default"].material.locale.shortMonths=["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],a["default"].material.locale.shorterMonths=["Я","Ф","М","Ап","М","Ин","Ил","Ав","С","О","Н","Д"],a["default"].material.locale.days=["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],a["default"].material.locale.shortDays=["Вск","Пнд","Втр","Срд","Чтв","Птн","Сбт"],a["default"].material.locale.shorterDays=["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],a["default"].material.locale.firstDayOfAWeek=1,a["default"].material.locale.confirm="Готово",a["default"].material.locale.cancel="Отмена",new a["default"]({store:N,router:G,render:function(e){return e(S)}}).$mount("#app")},f995:function(e,t,n){"use strict";var a=n("27ac"),r=n.n(a);r.a}});
//# sourceMappingURL=app.34de2816.js.map